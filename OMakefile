

# USE_OCAMLFIND=true
# we don't depend on ocamlfind here

BYTE_ENABLED = true
PROGRAM = fan
STDLIBPATH = $(shell $(OCAMLC) -where)

COMMON_INCLUDES[] =
    $(dir common)
TREEPARSER_INCLUDES[]=
    $(dir treeparser)
    $(COMMON_INCLUDES)
COLD_INCLUDES[]=
    $(dir cold)
    $(TREEPARSER_INCLUDES)
SRC_INCLUDES[]=
    $(dir src)
    $(TREEPARSER_INCLUDES)
    
FILES[] =
    dummy

OCAML_LINK_FLAGS += -linkall

NATIVE_ENABLED = true

OCAML_BYTE_LINK_FLAGS += dynlink.cma
OCAML_NATIVE_LINK_FLAGS += dynlink.cmxa

OCAML_LIBS[] =
	common/libcommon
	treeparser/libtreeparser
	cold/libcold

.SUBDIRS: common treeparser cold

.DEFAULT: $(OCamlProgram fan, $(FILES))
clean:
	rm -f $(filter-proper-targets $(glob $(addsuffix .*, $(FILES)))) \
	$(PROGRAM).run $(PROGRAM).opt

