


BYTE_ENABLED = true

PROGRAM = fan
STDLIBPATH = /Users/bobzhang1988/.opam/4.01.0dev+trunk/lib/ocaml


# STDLIBPATH = ocamlc -where
common/oconfig.ml: common/oconfig.mlp
	sed -e "s|%%LIBDIR%%|$(STDLIBPATH)|" $< > $@
OCAMLDEP_MODULES_ENABLED=false ## necessary!
OCamlGeneratedFiles(common/oconfig.ml)

COMMON_INCLUDES[] =
	$(dir common)

TREEPARSER_INCLUDES[]=
	$(dir treeparser)
	$(COMMON_INCLUDES)

COLD_INCLUDES[]=
	$(dir cold)
	$(TREEPARSER_INCLUDES)

FILES[] =
	dummy

OCAML_LINK_FLAGS+= -I +compiler-libs -linkall

NATIVE_ENABLED = true

OCAML_BYTE_LINK_FLAGS += dynlink.cma
OCAML_NATIVE_LINK_FLAGS += dynlink.cmxa
# USE_OCAMLFIND=true
# OCAMLPACKS[] =
# 	dynlink

OCAML_LIBS[] =
	# dynlink
	common/libcommon
	treeparser/libtreeparser
	cold/libcold

.SUBDIRS: common treeparser cold

.DEFAULT: $(OCamlProgram fan, $(FILES))
clean:
	rm -f $(filter-proper-targets $(glob $(addsuffix .*, $(FILES)))) \
	$(PROGRAM).run $(PROGRAM).opt

