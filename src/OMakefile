

# USE_OCAMLFIND=true
# we don't depend on ocamlfind here

# OMakeFlags(--verbose)

## compile flags
OCAMLFLAGS = 
BYTE_ENABLED = true
STDLIBPATH = $(shell $(OCAMLC) -where)
OCAMLBIN_EXT = *.cmo *.cmi *.cmx *.cma *.cmxa *.cmxs *.run *.opt *.annot
COMMON_INCLUDES[] =
    $(dir common)
TREEPARSER_INCLUDES[]=
    $(dir treeparser)
    $(COMMON_INCLUDES)
COLD_INCLUDES[]=
    $(dir cold)
    $(TREEPARSER_INCLUDES)
SRC_INCLUDES[]=
    $(dir src)
    $(TREEPARSER_INCLUDES)

OCAMLINCLUDES += $(dir cold)    
FILES[] =
    # fan

PROGRAM = fan

COLD_PP = $(file $(PROGRAM))

OCAML_LINK_FLAGS += -linkall

NATIVE_ENABLED = true

OCAML_BYTE_LINK_FLAGS += dynlink.cma
OCAML_NATIVE_LINK_FLAGS += dynlink.cmxa

OCAML_LIBS[] =
    common/libcommon
    treeparser/libtreeparser
    cold/libcold

.SUBDIRS: common treeparser cold hot

.DEFAULT: $(OCamlProgram fan, $(FILES))
    
clean:
    rm -rf $(OCAMLBIN_EXT)

