

OCAMLPPFLAGS = -pp $(COLD_PP)
OCAMLDEPPPFLAGS = -pp $(COLD_PP) # only useful for ml file 
OCAMLINCLUDES += $(TREEPARSER_INCLUDES)
OCAMLFLAGS +=  -I +compiler-libs -w a  # for PreCast to communicate with toplevel 

# FAN(module) =
#     section
#         OCAMLPPFLAGS = -pp $(COLD_PP)
#         $(module).cmo:
#         $(module).o:
#         $(module).cmx:
#         .SCANNER: scan-ocaml-%.mli: %.mli /.PHONY/OCamlGeneratedFilesTarget :value: $(OCamlScannerTargets $&)
#             $(OCamlScanner $<)
            
#         OCAMLDEPFLAGS = -pp $(COLD_PP)
#         .SCANNER: scan-ocaml-%.ml: %.ml /.PHONY/OCamlGeneratedFilesTarget :exists: %.mli :value: $(OCamlScannerTargets $&)
#            $(OCamlScanner $<)

# FAN(ant)
FILES[] =
    ant
    antN
    astInjection
    astLib
    astLibN
    ast_filters
    ast_macros
    ast_parsers
    ast_quotation
    basicN
    codeTemplate
    commentFilter
    compile_lex
    compile_stream
    ctypN
    deriveN
    dynLoader
    epN
    expN
    fAstN
    fControl
    fDyn
    fGramDef
    fGramGen
    fIncludeDir
    fMeta
    fQuotDir
    fSigUtil
    fState
    fanAstN
    fanOps
    fan_lex
    fgram
    filters
    flex_lib
    freeVars
    fsyntax
    gentry
    gfold
    gramlib
    idN
    langFans
    langInclude
    langOcaml
    langSave
    lex_lex
    lexing_util
    mkFan
    mktop
    objs
    objsN
    parse_fan
    parse_grammar
    parse_lex
    parse_lex2
    parse_stream
    pluginsN
    preCast
    stdFan
    typehook
    fan
    # fCMacroGen unused file
    # fEval
    # fanutop
    # fanX
    # fanTop

.DEFAULT: $(OCamlLibrary libhot, $(FILES))

clean:
    rm -rf $(OCAMLBIN_EXT)
