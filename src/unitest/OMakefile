

OCAMLPPFLAGS = -pp $(PP_FAN)
OCAMLDEPPPFLAGS = -pp $(PP_FAN)  # only useful for ml file 

# requires a preprocessor first 

# OCAMLINCLUDES += $(HOT_ANNOT_INCLUDES)

USE_OCAMLFIND = true

OCAMLPACKS[] =
    oUnit
    compiler-libs

PARSE = test_parse
LEX   = test_lex

section
    OCAML_LIBS[] += $(MAINDIR)/liblex 
    OCamlProgram ($(LEX), lexing_test  main_lex)

section
    OCAML_LIBS[] += $(MAINDIR)/libmain
    OCamlProgram( $(PARSE), location_ident main_parse)

.PHONY: test


test: $(PARSE) $(LEX)
    foreach(f=>..., $^)
        $f 
        
clean:
    rm -rf $(OCAMLBIN_EXT)
# local variables:
# compile-command: "pmake test"
# end: